<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MKW Team Scores</title>
    <style>
        table { border-collapse: collapse; width: 100%; }
        th, td { border: 1px solid black; padding: 8px; text-align: left; }
        th { background-color: #f2f2f2; }
    </style>
</head>
<body>
    <h1>MKW Team Scores</h1>
    <div id="scores"></div>

    <script>
        function updateScores() {
            fetch('https://mkw-table-bot-api.jprq.site/api/json/team_scores/1353450549944516658')
                .then(response => response.json())
                .then(data => {
                    const scoresDiv = document.getElementById('scores');
                    let html = `<h2>${data.title_str}</h2>`;
                    html += `<p>Format: ${data.format}, Races played: ${data.races_played}</p>`;
                    html += '<table><tr><th>Team</th><th>Score</th><th>Penalties</th></tr>';
                    
                    for (const [teamName, teamData] of Object.entries(data.teams)) {
                        html += `<tr>
                            <td style="color: ${teamData.hex_color}">${teamData.table_tag_str}</td>
                            <td>${teamData.total_score}</td>
                            <td>${teamData.penalties}</td>
                        </tr>`;
                    }
                    
                    html += '</table>';
                    scoresDiv.innerHTML = html;
                })
                .catch(error => console.error('Error fetching data:', error));
        }

        // Update scores immediately and then every 5 minutes
        updateScores();
        setInterval(updateScores, 300000);
    </script>
</body>
</html>
