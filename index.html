<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Team Scores</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: flex-start;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #scores {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            font-family: 'Roboto Mono', monospace;
            font-size: 48px;
            font-weight: 600;
            color: white;
            padding: 20px;
        }
        .name, .score, .races {
            width: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .name {
            width: 5ch; /* Enough for 5 letters */
        }
        .score, .races {
            width: 3ch; /* Enough for 3 letters */
        }
    </style>
</head>
<body>
    <div id="scores"></div>

    <script>
        // Fetch data from the example.json file
        fetch('example.json')
            .then(response => response.json())
            .then(data => {
                // Get the scores container
                const scoresContainer = document.getElementById('scores');

                // Create an array to store team names and scores
                const teamScores = [];

                // Loop through each team and get their names and scores
                Object.keys(data.teams).forEach(teamKey => {
                    const team = data.teams[teamKey];
                    teamScores.push({
                        name: team.table_tag_str.replace(/#\w+/, '').trim(),
                        score: team.total_score,
                        hasBlitzu: Object.values(team.players).some(player => player.lounge_name === 'blitzu')
                    });
                });

                // Sort the teamScores array to ensure the team with "blitzu" is first if it exists
                teamScores.sort((a, b) => b.hasBlitzu - a.hasBlitzu);

                // Create elements to display the team scores in the specified format
                const name1 = document.createElement('div');
                name1.className = 'name';
                name1.textContent = teamScores[0].name;

                const score1 = document.createElement('div');
                score1.className = 'score';
                score1.textContent = teamScores[0].score;

                const races = document.createElement('div');
                races.className = 'races';
                races.textContent = `R${data.races_played}`;

                const score2 = document.createElement('div');
                score2.className = 'score';
                score2.textContent = teamScores[1].score;

                const name2 = document.createElement('div');
                name2.className = 'name';
                name2.textContent = teamScores[1].name;

                // Append the elements to the scores container
                scoresContainer.appendChild(name1);
                scoresContainer.appendChild(score1);
                scoresContainer.appendChild(races);
                scoresContainer.appendChild(score2);
                scoresContainer.appendChild(name2);
            })
            .catch(error => {
                console.error('Error fetching data:', error);
            });
    </script>
</body>
</html>
